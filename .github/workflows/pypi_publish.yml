name: publish to pypi

run-name: publish to pypi

on:
  workflow_dispatch:
    inputs:
      python_version:
        description: "Python version to use (default: 3.12)"
        required: false
        default: "3.12"

jobs:
  wait-for-approval:
    uses: datachecks/github-action-workflows/.github/workflows/manual_approver.yaml@main

  publish-to-pypi:
    needs: wait-for-approval
    uses: datachecks/github-action-workflows/.github/workflows/poetry_publish.yaml@main
    with:
      python_version: ${{ inputs.python_version || '3.12' }}
    secrets:
      PYPI_TOKEN: ${{ secrets.PYPI_TOKEN }}
